{
  "version": 3,
  "sources": ["src/app/features/product/product.ts", "src/app/features/product/product.html"],
  "sourcesContent": ["import { HttpClient } from '@angular/common/http';\nimport { Component, ElementRef, QueryList, ViewChild, ViewChildren, viewChildren } from '@angular/core';\nimport { signal } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { Iproduct } from '../../shared/interface/Iproduct';\nimport { loadProducts, loadProductSuccess } from '../../store/actions/product.action';\nimport { selectAllProduct } from '../../store/selectors/product.selector';\nimport { debounceTime, distinctUntilChanged, fromEvent, map, Observable, switchMap,filter, of, throttleTime } from 'rxjs';\nimport { AsyncPipe } from '@angular/common';\n\n@Component({\n  selector: 'app-product',\n  imports: [],\n  templateUrl: './product.html',\n  styleUrl: './product.css'\n})\nexport class Product {\n  @ViewChild(\"searchValue\") searchValue!:ElementRef;  \n  @ViewChildren('tbody')  children!:QueryList<ElementRef<HTMLTableSectionElement>>\n    productTableData$: Observable<Iproduct[]>;\n    productTableDataAll$: Observable<Iproduct[]>;\n    productTableDataSignal = signal<Iproduct[]>([]);\n  constructor(private http:HttpClient,private store:Store<{product:{error:string,loading:boolean,product:Iproduct}}>){\n   this.productTableData$=this.store.select(selectAllProduct);\n   console.log(this.productTableData$,\"this.productTableData$\");\n   this.productTableDataAll$=this.store.select(selectAllProduct);\n   this.productTableData$.subscribe((response: Iproduct[]) => {\n      console.log(response);\n      this.productTableDataSignal.set(response); // âœ… This works\n    });\n  }\n ngOnInit():void{\nthis.getProductList();\n }\n getProductList(){\n//   this.http.get(\"https://api.escuelajs.co/api/v1/products\").subscribe((response:any)=>{\n//     console.log(response);\n//     let product:Iproduct[]=[];\n//     response.forEach((item:any)=>{\n// product.push({id:item.id,name:item.title});\n//     });\n\n//     this.store.dispatch(loadProductSuccess({product:product}));\n//   })\n\n this.store.dispatch(loadProducts());\n }\n ngAfterViewInit(){\n  this.searchEvent();\n  this.getChildRow();\n }\n getChildRow(){\n  this.children.forEach((tbody, index) => {\n      const rows = tbody.nativeElement.querySelectorAll('tr');\n      console.log(`Tbody ${index} has ${rows} rows`);\n      this.children.forEach((tbody, index) => {\n      const rows = tbody.nativeElement.querySelectorAll('tr');\n      console.log(`Tbody ${index}:`);\n      rows.forEach(row => console.log(row.textContent));\n    });\n    });\n }\n searchEvent(){\n fromEvent(this.searchValue.nativeElement,\"keyup\")\n   .pipe(\n    debounceTime(300),\n    throttleTime(500),\n    map((e:any)=>e.target.value),\n    distinctUntilChanged(),\n    switchMap((value)=>this.filterSearchProduct(value))\n   ).subscribe(filtered=>{\n    console.log(filtered,\"filtered\");\n    //this.productTableData$=of(filtered);\n     this.productTableDataSignal.set(filtered);\n   })\n }\n filterSearchProduct(value:string):Observable<Iproduct[]>{\n   return this.productTableDataAll$.pipe(\n    map((products: Iproduct[]) => {\n      if (!value) return products;\n      return products.filter(p =>\n        p.name.toLowerCase().includes(value.toLowerCase())\n      );\n    })\n  );\n\n }\n}\n\n\n", "<div>\n    <input type=\"text\" #searchValue>\n</div>\n<table >\n    <thead>\n        <tr>\n            <th>Id</th>\n            <th>Product</th>\n        </tr>\n    </thead>\n    <tbody #tbody>\n        @for( x of productTableDataSignal();track x.id){\n <tr [id]=\"x.id\" #tr>\n            <td>{{x.id}}</td>\n            <td>{{x.name}}</td>\n        </tr>\n        }@empty{\n<div>No record found</div>\n        }\n       \n    </tbody>\n</table>\n"],
  "mappings": "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",
  "names": ["tbody", "index", "rows"]
}
